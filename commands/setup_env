#!/bin/sh

# import helpers
source `dirname $0`/helpers

function setup_item2_integration {
  einf "Setting up iterm2 shell integration"
  curl -L https://iterm2.com/shell_integration/install_shell_integration_and_utilities.sh | bash
}

# Install brew
function setup_env {
  einf "Linking shell configs"
  
  setup_item2_integration
  link $DOTFILES_SHELL/functions ~/.functions.sh
  link $DOTFILES_SHELL/exports ~/.exports.sh
  link $DOTFILES_SHELL/aliases ~/.aliases.sh
  link $DOTFILES_SHELL/antigen ~/.antigen.sh
  link $DOTFILES_SHELL/nvm ~/.nvm.sh
  link $DOTFILES_SHELL/profile ~/.profile
  link $DOTFILES_SHELL/zshrc ~/.zshrc
  link $DOTFILES_SHELL/p10k.zsh ~/.p10k.zsh

  einf "Linking editor configs"
  # VSCode Configuration Files, attempt to remove existing settings and link ours
  mv $HOME/Library/Application\ Support/Code/User/settings.json $HOME/Library/Application\ Support/Code/User/settings.json.bak
  link $DOTFILES_CONFIGS/vscode-settings.json $HOME/Library/Application\ Support/Code/User/settings.json
  mv $HOME/Library/Application\ Support/Code/User/keybindings.json $HOME/Library/Application\ Support/Code/User/keybindings.json.bak
  mv $HOME/Library/Application\ Support/Code/User/snippets/vscode.code-snippets $HOME/Library/Application\ Support/Code/User/snippets/vscode.code-snippets.bak
  link $DOTFILES_CONFIGS/vscode.code-snippets $HOME/Library/Application\ Support/Code/User/snippets/vscode.code-snippets
  # Karabiner config
  mv $HOME/.config/karabiner/karabiner.json $HOME/.config/karabiner/karabiner.json.bak
  link $DOTFILES_CONFIGS/karabiner $HOME/.config/karabiner/

  einf "Linking github configs"
  link $DOTFILES_SHELL/gitconfig ~/.gitconfig
  link $DOTFILES_SHELL/gitignore ~/.gitignore
}

askdo setup_env "Setup environment?"
